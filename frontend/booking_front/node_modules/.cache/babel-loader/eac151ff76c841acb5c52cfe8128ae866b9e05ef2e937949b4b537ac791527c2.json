{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Container,Grid,Card,CardContent,Typography,CardMedia,Box,Alert,CircularProgress}from'@mui/material';import axios from'axios';import{API_BASE_URL}from'../config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Spaces=()=>{const[spaces,setSpaces]=useState([]);const[error,setError]=useState('');const[loading,setLoading]=useState(true);useEffect(()=>{const fetchSpaces=async()=>{try{const response=await axios.get(`${API_BASE_URL}/api/spaces/`);console.log('Spaces response:',response.data);setSpaces(response.data);}catch(err){console.error('Error fetching spaces:',err);setError('Ошибка при загрузке пространств');}finally{setLoading(false);}};fetchSpaces();},[]);const getImageUrl=imageUrl=>{if(!imageUrl)return'';if(imageUrl.startsWith('http'))return imageUrl;return`${API_BASE_URL}/media/${imageUrl}`;};if(loading){return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",minHeight:\"80vh\",children:/*#__PURE__*/_jsx(CircularProgress,{})});}if(error){return/*#__PURE__*/_jsx(Container,{maxWidth:\"lg\",sx:{mt:4,mb:4},children:/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:error})});}return/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",sx:{mt:4,mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"\\u0414\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0435 \\u043F\\u0440\\u043E\\u0441\\u0442\\u0440\\u0430\\u043D\\u0441\\u0442\\u0432\\u0430\"}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:spaces.map(space=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:4,children:/*#__PURE__*/_jsxs(Card,{sx:{height:'100%',display:'flex',flexDirection:'column'},children:[space.image&&/*#__PURE__*/_jsx(CardMedia,{component:\"img\",height:\"200\",image:getImageUrl(space.image),alt:space.name,sx:{objectFit:'cover',backgroundColor:'#f5f5f5'}}),/*#__PURE__*/_jsxs(CardContent,{sx:{flexGrow:1},children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h5\",component:\"div\",children:space.name}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:space.description||'Нет описания'})]})]})},space.id))})]});};export default Spaces;","map":{"version":3,"names":["React","useEffect","useState","Container","Grid","Card","CardContent","Typography","CardMedia","Box","Alert","CircularProgress","axios","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","Spaces","spaces","setSpaces","error","setError","loading","setLoading","fetchSpaces","response","get","console","log","data","err","getImageUrl","imageUrl","startsWith","display","justifyContent","alignItems","minHeight","children","maxWidth","sx","mt","mb","severity","variant","gutterBottom","container","spacing","map","space","item","xs","sm","md","height","flexDirection","image","component","alt","name","objectFit","backgroundColor","flexGrow","color","description","id"],"sources":["C:/Users/DiXer/PycharmProjects/booking spaces/frontend/booking_front/src/components/Spaces.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { \r\n  Container, \r\n  Grid, \r\n  Card, \r\n  CardContent, \r\n  Typography, \r\n  CardMedia,\r\n  Box,\r\n  Alert,\r\n  CircularProgress\r\n} from '@mui/material';\r\nimport axios from 'axios';\r\nimport { API_BASE_URL } from '../config';\r\n\r\ninterface Space {\r\n  id: number;\r\n  name: string;\r\n  description: string;\r\n  image: string;\r\n}\r\n\r\nconst Spaces: React.FC = () => {\r\n  const [spaces, setSpaces] = useState<Space[]>([]);\r\n  const [error, setError] = useState<string>('');\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchSpaces = async () => {\r\n      try {\r\n        const response = await axios.get(`${API_BASE_URL}/api/spaces/`);\r\n        console.log('Spaces response:', response.data);\r\n        setSpaces(response.data);\r\n      } catch (err) {\r\n        console.error('Error fetching spaces:', err);\r\n        setError('Ошибка при загрузке пространств');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchSpaces();\r\n  }, []);\r\n\r\n  const getImageUrl = (imageUrl: string) => {\r\n    if (!imageUrl) return '';\r\n    if (imageUrl.startsWith('http')) return imageUrl;\r\n    return `${API_BASE_URL}/media/${imageUrl}`;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box \r\n        display=\"flex\" \r\n        justifyContent=\"center\" \r\n        alignItems=\"center\" \r\n        minHeight=\"80vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\r\n        <Alert severity=\"error\">\r\n          {error}\r\n        </Alert>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        Доступные пространства\r\n      </Typography>\r\n      <Grid container spacing={3}>\r\n        {spaces.map((space) => (\r\n          <Grid item xs={12} sm={6} md={4} key={space.id}>\r\n            <Card sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\r\n              {space.image && (\r\n                <CardMedia\r\n                  component=\"img\"\r\n                  height=\"200\"\r\n                  image={getImageUrl(space.image)}\r\n                  alt={space.name}\r\n                  sx={{ \r\n                    objectFit: 'cover',\r\n                    backgroundColor: '#f5f5f5'\r\n                  }}\r\n                />\r\n              )}\r\n              <CardContent sx={{ flexGrow: 1 }}>\r\n                <Typography gutterBottom variant=\"h5\" component=\"div\">\r\n                  {space.name}\r\n                </Typography>\r\n                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                  {space.description || 'Нет описания'}\r\n                </Typography>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n        ))}\r\n      </Grid>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Spaces; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}